# DB Schema
> Generated by [`prisma-markdown`](https://github.com/samchon/prisma-markdown)

- [McpServer](#mcpserver)
- [NextAuth](#nextauth)
- [Organization](#organization)
- [UserMcpServer](#usermcpserver)
- [Chat](#chat)
- [default](#default)

## McpServer
```mermaid
erDiagram
"McpServer" {
  String id PK
  String name UK
  String iconPath "nullable"
  TransportType transportType
  String command "nullable"
  String args
  String url "nullable"
  String envVars
  ServerType serverType
  String createdBy FK "nullable"
  McpServerVisibility visibility
  Boolean isPublic
  DateTime createdAt
  DateTime updatedAt
}
"Tool" {
  String id PK
  String name
  String description
  Json inputSchema
  Boolean isEnabled
  String mcpServerId FK
  DateTime createdAt
  DateTime updatedAt
}
"UserMcpServerConfig" {
  String id PK
  String name
  String description
  String envVars
  String mcpServerId FK
  String userId FK
  String organizationId FK "nullable"
  DateTime createdAt
  DateTime updatedAt
}
"UserToolGroupTool" {
  String userMcpServerConfigId FK
  String toolGroupId FK
  String toolId FK
  Int sortOrder
  DateTime createdAt
}
"UserToolGroup" {
  String id PK
  String name
  String description
  Boolean isEnabled
  String userId FK
  String organizationId FK "nullable"
  DateTime createdAt
  DateTime updatedAt
}
"UserMcpServerInstance" {
  String id PK
  String name
  String description
  String iconPath "nullable"
  ServerStatus serverStatus
  ServerType serverType
  String toolGroupId FK,UK
  String userId FK
  String organizationId FK "nullable"
  DateTime createdAt
  DateTime updatedAt
}
"_ToolToUserMcpServerConfig" {
  String A FK
  String B FK
}
"UserMcpServerInstanceToolGroup" {
  String mcpServerInstanceId FK
  String toolGroupId FK
  Int sortOrder
  DateTime createdAt
}
"Tool" }o--|| "McpServer" : mcpServer
"UserMcpServerConfig" }o--|| "McpServer" : mcpServer
"UserToolGroupTool" }o--|| "UserMcpServerConfig" : userMcpServerConfig
"UserToolGroupTool" }o--|| "UserToolGroup" : toolGroup
"UserToolGroupTool" }o--|| "Tool" : tool
"UserMcpServerInstance" |o--|| "UserToolGroup" : toolGroup
"_ToolToUserMcpServerConfig" }o--|| "Tool" : Tool
"_ToolToUserMcpServerConfig" }o--|| "UserMcpServerConfig" : UserMcpServerConfig
"UserMcpServerInstanceToolGroup" }o--|| "UserMcpServerInstance" : mcpServerInstance
"UserMcpServerInstanceToolGroup" }o--|| "UserToolGroup" : toolGroup
```

### `McpServer`
MCP ã‚µãƒ¼ãƒãƒ¼ (github ã‚„ notion ãªã©ã®æ¥ç¶šã™ã‚‹å¤–éƒ¨ MCP ã‚µãƒ¼ãƒãƒ¼)
transportType ã«å¿œã˜ã¦æ¥ç¶šæ–¹å¼ã‚’é¸æŠ

**Properties**
  - `id`: 
  - `name`: MCP ã‚µãƒ¼ãƒãƒ¼å
  - `iconPath`: ã‚¢ã‚¤ã‚³ãƒ³ãƒ‘ã‚¹
  - `transportType`: æ¥ç¶šã‚¿ã‚¤ãƒ—ï¼ˆstdio, sseï¼‰
  - `command`: STDIOç”¨ã®ã‚³ãƒãƒ³ãƒ‰
  - `args`: STDIOç”¨ã®å¼•æ•°
  - `url`: SSEæ¥ç¶šç”¨ã®URL
  - `envVars`
    > STDIO: ç’°å¢ƒå¤‰æ•°ã®ã‚­ãƒ¼é…åˆ—ï¼ˆå€¤ã¯UserMcpServerConfigã§ç®¡ç†ï¼‰
    > SSE: ãƒ˜ãƒƒãƒ€ãƒ¼ã®ã‚­ãƒ¼é…åˆ—ï¼ˆå€¤ã¯UserMcpServerConfigã§ç®¡ç†ï¼‰
  - `serverType`: ã‚µãƒ¼ãƒãƒ¼ã®ç¨®é¡ï¼ˆå…¬å¼/ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚«ã‚¹ã‚¿ãƒ ï¼‰
  - `createdBy`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚«ã‚¹ã‚¿ãƒ ã‚µãƒ¼ãƒãƒ¼ã®ä½œæˆè€…
  - `visibility`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚«ã‚¹ã‚¿ãƒ ã‚µãƒ¼ãƒãƒ¼ã®å¯è¦–æ€§
  - `isPublic`: ã‚µãƒ¼ãƒãƒ¼ãŒå…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã‹ï¼ˆãƒ¬ã‚¬ã‚·ãƒ¼ï¼‰
  - `createdAt`: 
  - `updatedAt`: 

### `Tool`
MCP ã‚µãƒ¼ãƒãƒ¼ã®ãƒ„ãƒ¼ãƒ«ä¸€è¦§

**Properties**
  - `id`: 
  - `name`: ãƒ„ãƒ¼ãƒ«ã®åå‰
  - `description`: ãƒ„ãƒ¼ãƒ«ã®èª¬æ˜
  - `inputSchema`: ãƒ„ãƒ¼ãƒ«ã®å…¥åŠ›ã‚¹ã‚­ãƒ¼ãƒï¼ˆJSON Schemaå½¢å¼ï¼‰
  - `isEnabled`: ãƒ„ãƒ¼ãƒ«ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã‹
  - `mcpServerId`: 
  - `createdAt`: 
  - `updatedAt`: 

### `UserMcpServerConfig`
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒåˆ©ç”¨ã§ãã‚‹MCPã‚µãƒ¼ãƒãƒ¼ã®è¨­å®š

**Properties**
  - `id`: 
  - `name`: è¨­å®šåï¼ˆä¾‹ï¼šã€Œé–‹ç™ºç”¨ã€ã€Œæœ¬ç•ªç”¨ã€ã€Œãƒ†ã‚¹ãƒˆç”¨ã€ï¼‰
  - `description`: è¨­å®šã®èª¬æ˜
  - `envVars`: MCPã‚µãƒ¼ãƒãƒ¼ã® envVars ã‚’æ–‡å­—é…åˆ—ã‚’ key ã«ã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ Object.stringify + æš—å·åŒ–ã—ãŸã‚‚ã®
  - `mcpServerId`: MCPã‚µãƒ¼ãƒãƒ¼ID
  - `userId`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
  - `organizationId`: çµ„ç¹”
  - `createdAt`: 
  - `updatedAt`: 

### `UserToolGroupTool`
ToolGroup, Toolã®é–¢é€£ã‚’è¡¨ã™ä¸­é–“ãƒ†ãƒ¼ãƒ–ãƒ«

**Properties**
  - `userMcpServerConfigId`: UserMcpServerConfig ã¸ã®å‚ç…§
  - `toolGroupId`: ToolGroupã¸ã®å‚ç…§
  - `toolId`: Toolã¸ã®å‚ç…§
  - `sortOrder`: ã‚½ãƒ¼ãƒˆé †åº
  - `createdAt`: 

### `UserToolGroup`
ã©ã®ãƒ„ãƒ¼ãƒ«ç¾¤ã‚’åˆ©ç”¨ã™ã‚‹ã‹ã‚’è¨­å®šã™ã‚‹
tool group å†…ã«ã€åŒä¸€ã® mcpServer ã®è¨­å®šå…¥ã‚Œã‚‰ã‚Œãªã„ğŸ¤”

**Properties**
  - `id`: 
  - `name`: ãƒ„ãƒ¼ãƒ«ã‚°ãƒ«ãƒ¼ãƒ—å
  - `description`: ãƒ„ãƒ¼ãƒ«ã‚°ãƒ«ãƒ¼ãƒ—ã®èª¬æ˜
  - `isEnabled`: ãƒ„ãƒ¼ãƒ«ã‚°ãƒ«ãƒ¼ãƒ—ãŒæœ‰åŠ¹ã‹ã©ã†ã‹
  - `userId`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
  - `organizationId`: çµ„ç¹”
  - `createdAt`: 
  - `updatedAt`: 

### `UserMcpServerInstance`
MCPã‚µãƒ¼ãƒãƒ¼ã¨ã—ã¦åˆ©ç”¨ã™ã‚‹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹

**Properties**
  - `id`: 
  - `name`: ç¨¼åƒä¸­ã®MCPã‚µãƒ¼ãƒãƒ¼å
  - `description`: ã‚µãƒ¼ãƒãƒ¼ã®èª¬æ˜
  - `iconPath`: ã‚¢ã‚¤ã‚³ãƒ³ãƒ‘ã‚¹
  - `serverStatus`: ã‚µãƒ¼ãƒãƒ¼ã®çŠ¶æ…‹
  - `serverType`: ã‚µãƒ¼ãƒãƒ¼ã®ç¨®é¡
  - `toolGroupId`
    > ãƒ„ãƒ¼ãƒ«ã‚°ãƒ«ãƒ¼ãƒ—
    > UserMcpServerInstance ã”ã¨ã«1ã¤ã® ToolGroup ãŒå­˜åœ¨ã™ã‚‹ 1:1 é–¢ä¿‚
  - `userId`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
  - `organizationId`: çµ„ç¹”
  - `createdAt`: 
  - `updatedAt`: 

### `_ToolToUserMcpServerConfig`
Pair relationship table between [Tool](#Tool) and [UserMcpServerConfig](#UserMcpServerConfig)

**Properties**
  - `A`: 
  - `B`: 

### `UserMcpServerInstanceToolGroup`
MCPã‚µãƒ¼ãƒãƒ¼ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¨ãƒ„ãƒ¼ãƒ«ã‚°ãƒ«ãƒ¼ãƒ—ã®é–¢é€£ã‚’ç®¡ç†ã™ã‚‹ä¸­é–“ãƒ†ãƒ¼ãƒ–ãƒ«

**Properties**
  - `mcpServerInstanceId`: 
  - `toolGroupId`: 
  - `sortOrder`: ã“ã®McpServerInstanceå†…ã§ã®ToolGroupã®è¡¨ç¤ºé †åº
  - `createdAt`: 


## NextAuth
```mermaid
erDiagram
"Account" {
  String id PK
  String userId FK
  String type
  String provider
  String providerAccountId
  String refresh_token "nullable"
  String access_token "nullable"
  Int expires_at "nullable"
  String token_type "nullable"
  String scope "nullable"
  String id_token "nullable"
  String session_state "nullable"
  Int refresh_token_expires_in "nullable"
}
"Session" {
  String id PK
  String sessionToken UK
  String userId FK
  DateTime expires
}
"User" {
  String id PK
  String name "nullable"
  String email UK "nullable"
  DateTime emailVerified "nullable"
  String image "nullable"
  Role role
}
"VerificationToken" {
  String identifier
  String token UK
  DateTime expires
}
"Account" }o--|| "User" : user
"Session" }o--|| "User" : user
```

### `Account`

**Properties**
  - `id`: 
  - `userId`: 
  - `type`: èªè¨¼ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ç¨®é¡ï¼ˆoauth, oidc, email, credentialsï¼‰
  - `provider`: èªè¨¼ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼åï¼ˆgoogle, github, etc.ï¼‰
  - `providerAccountId`: ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å´ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆID
  - `refresh_token`: ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³
  - `access_token`: ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³
  - `expires_at`: ãƒˆãƒ¼ã‚¯ãƒ³ã®æœ‰åŠ¹æœŸé™ï¼ˆUnixã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼‰
  - `token_type`: ãƒˆãƒ¼ã‚¯ãƒ³ã®ç¨®é¡
  - `scope`: èªå¯ã‚¹ã‚³ãƒ¼ãƒ—
  - `id_token`: IDãƒˆãƒ¼ã‚¯ãƒ³
  - `session_state`: ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹
  - `refresh_token_expires_in`: ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³ã®æœ‰åŠ¹æœŸé™ï¼ˆç§’ï¼‰

### `Session`

**Properties**
  - `id`: 
  - `sessionToken`: ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³
  - `userId`: 
  - `expires`: ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®æœ‰åŠ¹æœŸé™

### `User`

**Properties**
  - `id`: 
  - `name`: ãƒ¦ãƒ¼ã‚¶ãƒ¼å
  - `email`: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
  - `emailVerified`: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®æ¤œè¨¼æ—¥æ™‚
  - `image`: ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒã®URL
  - `role`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ¨©é™

### `VerificationToken`

**Properties**
  - `identifier`: æ¤œè¨¼å¯¾è±¡ã®è­˜åˆ¥å­ï¼ˆãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãªã©ï¼‰
  - `token`: æ¤œè¨¼ãƒˆãƒ¼ã‚¯ãƒ³
  - `expires`: ãƒˆãƒ¼ã‚¯ãƒ³ã®æœ‰åŠ¹æœŸé™


## Organization
```mermaid
erDiagram
"Organization" {
  String id PK
  String name
  String description "nullable"
  String logoUrl "nullable"
  Boolean isDeleted
  String createdBy FK
  DateTime createdAt
  DateTime updatedAt
}
"OrganizationMember" {
  String id PK
  String organizationId FK
  String userId FK
  Boolean isAdmin
  DateTime createdAt
  DateTime updatedAt
}
"OrganizationInvitation" {
  String id PK
  String organizationId FK
  String email
  String token UK
  String invitedBy FK
  Boolean isAdmin
  String roleIds
  String groupIds
  DateTime expires
  DateTime createdAt
  DateTime updatedAt
}
"OrganizationGroup" {
  String id PK
  String name
  String description "nullable"
  String organizationId FK
  DateTime createdAt
  DateTime updatedAt
}
"OrganizationRole" {
  String id PK
  String name
  String description "nullable"
  String organizationId FK
  Boolean isDefault
  DateTime createdAt
  DateTime updatedAt
}
"RolePermission" {
  String id PK
  String roleId FK
  ResourceType resourceType
  PermissionAction action
  DateTime createdAt
  DateTime updatedAt
}
"ResourceAccessControl" {
  String id PK
  String organizationId FK
  ResourceType resourceType
  String resourceId
  String memberId FK "nullable"
  String groupId FK "nullable"
  PermissionAction allowedActions
  PermissionAction deniedActions
  DateTime createdAt
  DateTime updatedAt
}
"_OrganizationMemberToOrganizationRole" {
  String A FK
  String B FK
}
"_OrganizationGroupToOrganizationMember" {
  String A FK
  String B FK
}
"_OrganizationGroupToOrganizationRole" {
  String A FK
  String B FK
}
"OrganizationMember" }o--|| "Organization" : organization
"OrganizationInvitation" }o--|| "Organization" : organization
"OrganizationGroup" }o--|| "Organization" : organization
"OrganizationRole" }o--|| "Organization" : organization
"RolePermission" }o--|| "OrganizationRole" : role
"ResourceAccessControl" }o--|| "Organization" : organization
"ResourceAccessControl" }o--o| "OrganizationMember" : member
"ResourceAccessControl" }o--o| "OrganizationGroup" : group
"_OrganizationMemberToOrganizationRole" }o--|| "OrganizationMember" : OrganizationMember
"_OrganizationMemberToOrganizationRole" }o--|| "OrganizationRole" : OrganizationRole
"_OrganizationGroupToOrganizationMember" }o--|| "OrganizationGroup" : OrganizationGroup
"_OrganizationGroupToOrganizationMember" }o--|| "OrganizationMember" : OrganizationMember
"_OrganizationGroupToOrganizationRole" }o--|| "OrganizationGroup" : OrganizationGroup
"_OrganizationGroupToOrganizationRole" }o--|| "OrganizationRole" : OrganizationRole
```

### `Organization`

**Properties**
  - `id`: 
  - `name`: çµ„ç¹”å
  - `description`: çµ„ç¹”ã®èª¬æ˜
  - `logoUrl`: çµ„ç¹”ã®ãƒ­ã‚´URL
  - `isDeleted`: è«–ç†å‰Šé™¤ãƒ•ãƒ©ã‚°
  - `createdBy`: çµ„ç¹”ã®ä½œæˆè€…
  - `createdAt`: 
  - `updatedAt`: 

### `OrganizationMember`

**Properties**
  - `id`: 
  - `organizationId`: 
  - `userId`: 
  - `isAdmin`: ã“ã®ãƒ¡ãƒ³ãƒãƒ¼ãŒç®¡ç†è€…æ¨©é™ã‚’æŒã¤ã‹
  - `createdAt`: 
  - `updatedAt`: 

### `OrganizationInvitation`

**Properties**
  - `id`: 
  - `organizationId`: 
  - `email`: æ‹›å¾…å…ˆãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
  - `token`: æ‹›å¾…ãƒˆãƒ¼ã‚¯ãƒ³
  - `invitedBy`: æ‹›å¾…è€…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
  - `isAdmin`: æ‹›å¾…ã•ã‚ŒãŸäººãŒç®¡ç†è€…ã«ãªã‚‹ã‹
  - `roleIds`: ä»˜ä¸ã•ã‚Œã‚‹äºˆå®šã®ãƒ­ãƒ¼ãƒ«IDé…åˆ—
  - `groupIds`: æ‹›å¾…æ™‚ã«è¿½åŠ ã™ã‚‹ã‚°ãƒ«ãƒ¼ãƒ—IDé…åˆ—
  - `expires`: æ‹›å¾…ã®æœ‰åŠ¹æœŸé™
  - `createdAt`: 
  - `updatedAt`: 

### `OrganizationGroup`

**Properties**
  - `id`: 
  - `name`: ã‚°ãƒ«ãƒ¼ãƒ—å
  - `description`: ã‚°ãƒ«ãƒ¼ãƒ—ã®èª¬æ˜
  - `organizationId`: çµ„ç¹”ID
  - `createdAt`: 
  - `updatedAt`: 

### `OrganizationRole`
ãƒ­ãƒ¼ãƒ«å®šç¾©

**Properties**
  - `id`: 
  - `name`: ãƒ­ãƒ¼ãƒ«å
  - `description`: ãƒ­ãƒ¼ãƒ«ã®èª¬æ˜
  - `organizationId`: çµ„ç¹”ID
  - `isDefault`: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ­ãƒ¼ãƒ«ã‹
  - `createdAt`: 
  - `updatedAt`: 

### `RolePermission`
ãƒ­ãƒ¼ãƒ«ã«ä»˜ä¸ã•ã‚ŒãŸæ¨©é™

**Properties**
  - `id`: 
  - `roleId`: ãƒ­ãƒ¼ãƒ«ID
  - `resourceType`: ãƒªã‚½ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ—
  - `action`: æ¨©é™ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
  - `createdAt`: 
  - `updatedAt`: 

### `ResourceAccessControl`
ç‰¹å®šãƒªã‚½ãƒ¼ã‚¹ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡

**Properties**
  - `id`: 
  - `organizationId`: çµ„ç¹”ID
  - `resourceType`: ãƒªã‚½ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ—
  - `resourceId`: ãƒªã‚½ãƒ¼ã‚¹ID
  - `memberId`: å¯¾è±¡ãƒ¡ãƒ³ãƒãƒ¼ï¼ˆnullã®å ´åˆã¯ã‚°ãƒ«ãƒ¼ãƒ—ã¾ãŸã¯ã™ã¹ã¦ã®ãƒ¡ãƒ³ãƒãƒ¼ï¼‰
  - `groupId`: å¯¾è±¡ã‚°ãƒ«ãƒ¼ãƒ—ï¼ˆnullã®å ´åˆã¯ãƒ¡ãƒ³ãƒãƒ¼å€‹äººã¾ãŸã¯ã™ã¹ã¦ã®ãƒ¡ãƒ³ãƒãƒ¼ï¼‰
  - `allowedActions`: è¨±å¯ã•ã‚ŒãŸã‚¢ã‚¯ã‚·ãƒ§ãƒ³
  - `deniedActions`: æ‹’å¦ã•ã‚ŒãŸã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã€€(â€»è¨±å¯ã‚ˆã‚Šã‚‚æ‹’å¦ãŒå„ªå…ˆã•ã‚Œã‚‹)
  - `createdAt`: 
  - `updatedAt`: 

### `_OrganizationMemberToOrganizationRole`
Pair relationship table between [OrganizationMember](#OrganizationMember) and [OrganizationRole](#OrganizationRole)

**Properties**
  - `A`: 
  - `B`: 

### `_OrganizationGroupToOrganizationMember`
Pair relationship table between [OrganizationGroup](#OrganizationGroup) and [OrganizationMember](#OrganizationMember)

**Properties**
  - `A`: 
  - `B`: 

### `_OrganizationGroupToOrganizationRole`
Pair relationship table between [OrganizationGroup](#OrganizationGroup) and [OrganizationRole](#OrganizationRole)

**Properties**
  - `A`: 
  - `B`: 


## UserMcpServer
```mermaid
erDiagram
"UserMcpServerInstanceToolGroup" {
  String mcpServerInstanceId FK
  String toolGroupId FK
  Int sortOrder
  DateTime createdAt
}
"User" {
  String id PK
  String name "nullable"
  String email UK "nullable"
  DateTime emailVerified "nullable"
  String image "nullable"
  Role role
}
"UserMcpServerConfig" {
  String id PK
  String name
  String description
  String envVars
  String mcpServerId FK
  String userId FK
  String organizationId FK "nullable"
  DateTime createdAt
  DateTime updatedAt
}
"UserToolGroupTool" {
  String userMcpServerConfigId FK
  String toolGroupId FK
  String toolId FK
  Int sortOrder
  DateTime createdAt
}
"UserToolGroup" {
  String id PK
  String name
  String description
  Boolean isEnabled
  String userId FK
  String organizationId FK "nullable"
  DateTime createdAt
  DateTime updatedAt
}
"UserMcpServerInstance" {
  String id PK
  String name
  String description
  String iconPath "nullable"
  ServerStatus serverStatus
  ServerType serverType
  String toolGroupId FK,UK
  String userId FK
  String organizationId FK "nullable"
  DateTime createdAt
  DateTime updatedAt
}
"_ToolToUserMcpServerConfig" {
  String A FK
  String B FK
}
"UserMcpServerInstanceToolGroup" }o--|| "UserMcpServerInstance" : mcpServerInstance
"UserMcpServerInstanceToolGroup" }o--|| "UserToolGroup" : toolGroup
"UserMcpServerConfig" }o--|| "User" : user
"UserToolGroupTool" }o--|| "UserMcpServerConfig" : userMcpServerConfig
"UserToolGroupTool" }o--|| "UserToolGroup" : toolGroup
"UserToolGroup" }o--|| "User" : user
"UserMcpServerInstance" |o--|| "UserToolGroup" : toolGroup
"UserMcpServerInstance" }o--|| "User" : user
"_ToolToUserMcpServerConfig" }o--|| "UserMcpServerConfig" : UserMcpServerConfig
```

### `UserMcpServerInstanceToolGroup`
MCPã‚µãƒ¼ãƒãƒ¼ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¨ãƒ„ãƒ¼ãƒ«ã‚°ãƒ«ãƒ¼ãƒ—ã®é–¢é€£ã‚’ç®¡ç†ã™ã‚‹ä¸­é–“ãƒ†ãƒ¼ãƒ–ãƒ«

**Properties**
  - `mcpServerInstanceId`: 
  - `toolGroupId`: 
  - `sortOrder`: ã“ã®McpServerInstanceå†…ã§ã®ToolGroupã®è¡¨ç¤ºé †åº
  - `createdAt`: 

### `User`

**Properties**
  - `id`: 
  - `name`: ãƒ¦ãƒ¼ã‚¶ãƒ¼å
  - `email`: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
  - `emailVerified`: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®æ¤œè¨¼æ—¥æ™‚
  - `image`: ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒã®URL
  - `role`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ¨©é™

### `UserMcpServerConfig`
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒåˆ©ç”¨ã§ãã‚‹MCPã‚µãƒ¼ãƒãƒ¼ã®è¨­å®š

**Properties**
  - `id`: 
  - `name`: è¨­å®šåï¼ˆä¾‹ï¼šã€Œé–‹ç™ºç”¨ã€ã€Œæœ¬ç•ªç”¨ã€ã€Œãƒ†ã‚¹ãƒˆç”¨ã€ï¼‰
  - `description`: è¨­å®šã®èª¬æ˜
  - `envVars`: MCPã‚µãƒ¼ãƒãƒ¼ã® envVars ã‚’æ–‡å­—é…åˆ—ã‚’ key ã«ã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ Object.stringify + æš—å·åŒ–ã—ãŸã‚‚ã®
  - `mcpServerId`: MCPã‚µãƒ¼ãƒãƒ¼ID
  - `userId`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
  - `organizationId`: çµ„ç¹”
  - `createdAt`: 
  - `updatedAt`: 

### `UserToolGroupTool`
ToolGroup, Toolã®é–¢é€£ã‚’è¡¨ã™ä¸­é–“ãƒ†ãƒ¼ãƒ–ãƒ«

**Properties**
  - `userMcpServerConfigId`: UserMcpServerConfig ã¸ã®å‚ç…§
  - `toolGroupId`: ToolGroupã¸ã®å‚ç…§
  - `toolId`: Toolã¸ã®å‚ç…§
  - `sortOrder`: ã‚½ãƒ¼ãƒˆé †åº
  - `createdAt`: 

### `UserToolGroup`
ã©ã®ãƒ„ãƒ¼ãƒ«ç¾¤ã‚’åˆ©ç”¨ã™ã‚‹ã‹ã‚’è¨­å®šã™ã‚‹
tool group å†…ã«ã€åŒä¸€ã® mcpServer ã®è¨­å®šå…¥ã‚Œã‚‰ã‚Œãªã„ğŸ¤”

**Properties**
  - `id`: 
  - `name`: ãƒ„ãƒ¼ãƒ«ã‚°ãƒ«ãƒ¼ãƒ—å
  - `description`: ãƒ„ãƒ¼ãƒ«ã‚°ãƒ«ãƒ¼ãƒ—ã®èª¬æ˜
  - `isEnabled`: ãƒ„ãƒ¼ãƒ«ã‚°ãƒ«ãƒ¼ãƒ—ãŒæœ‰åŠ¹ã‹ã©ã†ã‹
  - `userId`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
  - `organizationId`: çµ„ç¹”
  - `createdAt`: 
  - `updatedAt`: 

### `UserMcpServerInstance`
MCPã‚µãƒ¼ãƒãƒ¼ã¨ã—ã¦åˆ©ç”¨ã™ã‚‹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹

**Properties**
  - `id`: 
  - `name`: ç¨¼åƒä¸­ã®MCPã‚µãƒ¼ãƒãƒ¼å
  - `description`: ã‚µãƒ¼ãƒãƒ¼ã®èª¬æ˜
  - `iconPath`: ã‚¢ã‚¤ã‚³ãƒ³ãƒ‘ã‚¹
  - `serverStatus`: ã‚µãƒ¼ãƒãƒ¼ã®çŠ¶æ…‹
  - `serverType`: ã‚µãƒ¼ãƒãƒ¼ã®ç¨®é¡
  - `toolGroupId`
    > ãƒ„ãƒ¼ãƒ«ã‚°ãƒ«ãƒ¼ãƒ—
    > UserMcpServerInstance ã”ã¨ã«1ã¤ã® ToolGroup ãŒå­˜åœ¨ã™ã‚‹ 1:1 é–¢ä¿‚
  - `userId`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
  - `organizationId`: çµ„ç¹”
  - `createdAt`: 
  - `updatedAt`: 

### `_ToolToUserMcpServerConfig`
Pair relationship table between [Tool](#Tool) and [UserMcpServerConfig](#UserMcpServerConfig)

**Properties**
  - `A`: 
  - `B`: 


## Chat
```mermaid
erDiagram
"User" {
  String id PK
  String name "nullable"
  String email UK "nullable"
  DateTime emailVerified "nullable"
  String image "nullable"
  Role role
}
```

### `User`

**Properties**
  - `id`: 
  - `name`: ãƒ¦ãƒ¼ã‚¶ãƒ¼å
  - `email`: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
  - `emailVerified`: ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®æ¤œè¨¼æ—¥æ™‚
  - `image`: ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒã®URL
  - `role`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ¨©é™


## default
```mermaid
erDiagram
"Chat" {
  String id PK
  DateTime createdAt
  String title
  String userId FK
  Visibility visibility
}
"Message" {
  String id PK
  String chatId FK
  String role
  Json parts
  Json attachments
  DateTime createdAt
}
"Vote" {
  String chatId FK
  String messageId FK
  Boolean isUpvoted
}
"Document" {
  String id
  DateTime createdAt
  String title
  String content "nullable"
  DocumentKind kind
  String userId FK
}
"Suggestion" {
  String id PK
  String documentId FK
  DateTime documentCreatedAt
  String originalText
  String suggestedText
  String description "nullable"
  Boolean isResolved
  String userId FK
  DateTime createdAt
}
"Stream" {
  String id PK
  String chatId FK
  DateTime createdAt
}
"Message" }o--|| "Chat" : chat
"Vote" }o--|| "Chat" : chat
"Vote" }o--|| "Message" : message
"Suggestion" }o--|| "Document" : document
"Stream" }o--|| "Chat" : chat
```

### `Chat`

**Properties**
  - `id`: 
  - `createdAt`: 
  - `title`: 
  - `userId`: 
  - `visibility`: 

### `Message`

**Properties**
  - `id`: 
  - `chatId`: 
  - `role`: 
  - `parts`: 
  - `attachments`: 
  - `createdAt`: 

### `Vote`

**Properties**
  - `chatId`: 
  - `messageId`: 
  - `isUpvoted`: 

### `Document`

**Properties**
  - `id`: 
  - `createdAt`: 
  - `title`: 
  - `content`: 
  - `kind`: 
  - `userId`: 

### `Suggestion`

**Properties**
  - `id`: 
  - `documentId`: 
  - `documentCreatedAt`: 
  - `originalText`: 
  - `suggestedText`: 
  - `description`: 
  - `isResolved`: 
  - `userId`: 
  - `createdAt`: 

### `Stream`

**Properties**
  - `id`: 
  - `chatId`: 
  - `createdAt`: 