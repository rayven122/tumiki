# ==========================================
# Tumiki - Environment Variables Template
# ==========================================

# ------------------------------------------
# データベース設定 (🔴 必須)
# ------------------------------------------
DATABASE_URL="postgresql://root:password@localhost:5434/tumiki"

# ------------------------------------------
# Prismaフィールド暗号化設定 (🔴 必須)
# ------------------------------------------
# CI/テスト環境用のダミーキー（本番環境では必ず変更すること）
PRISMA_FIELD_ENCRYPTION_KEY="k1.aesgcm256.kG588VHXtTCncg2y9KmbXqyssLulxqUjrSn9_TXFu2U="
# PRISMA_FIELD_DECRYPTION_KEYS="generate-with-cloak-library"  # オプション: キーローテーション時のみ使用
PRISMA_FIELD_ENCRYPTION_HASH_SALT="generate-with-openssl-rand-base64-32"

# ------------------------------------------
# Redis設定 (🔴 必須)
# ------------------------------------------
REDIS_URL="redis://localhost:6379"
# REDIS_CONNECT_TIMEOUT=10000  # オプション: Redis接続タイムアウト（ミリ秒）
REDIS_ENCRYPTION_KEY="generate-with-node-crypto-randomBytes-32-hex"

# ------------------------------------------
# Keycloak認証設定 (🔴 必須)
# ------------------------------------------
# 共通設定
KEYCLOAK_ISSUER="http://localhost:8443/realms/tumiki"
KEYCLOAK_ADMIN_USERNAME="admin"
KEYCLOAK_ADMIN_PASSWORD="admin123"

# Manager App用クライアント設定（Auth.js用）
# 注意: Desktop Appとは別のクライアントです
KEYCLOAK_CLIENT_ID="tumiki-manager"
KEYCLOAK_CLIENT_SECRET="tumiki-manager-secret-change-in-production"

# ------------------------------------------
# Auth.js設定 (🔴 必須)
# ------------------------------------------
NEXTAUTH_SECRET="generate-with-openssl-rand-base64-32"
NEXTAUTH_URL="http://localhost:3000"

# ------------------------------------------
# MCP Proxy設定 (🔴 必須)
# ------------------------------------------
NEXT_PUBLIC_MCP_PROXY_URL="http://localhost:8080"

# ------------------------------------------
# Desktop App設定 (🔴 デスクトップアプリ使用時は必須)
# ------------------------------------------
# Desktop App データベース
DESKTOP_DATABASE_URL="file:./data/desktop.db"

# Desktop App が Manager API に接続するための URL
VITE_MANAGER_API_URL="https://local.tumiki.cloud:3000/api/trpc"

# Desktop App Keycloak認証設定
# 注意: managerアプリとは別のクライアントを使用
# Keycloak管理画面で "tumiki-desktop" クライアントを作成し、
# 取得したClient Secretを KEYCLOAK_CLIENT_SECRET に設定してください
KEYCLOAK_CLIENT_ID="tumiki-desktop"
KEYCLOAK_CLIENT_SECRET="tumiki-desktop-secret-change-in-production"

# ------------------------------------------
# キャッシュ設定 (🟢 任意)
# ------------------------------------------
# CACHE_TTL=300  # オプション: キャッシュ有効期限（秒）

# ------------------------------------------
# メール送信設定 (🟢 任意)
# ------------------------------------------
# SMTP_HOST="smtp.gmail.com"
# SMTP_PORT=587
# SMTP_USER="your-email@gmail.com"
# SMTP_PASS="your-app-password"
# FROM_EMAIL="info@tumiki.cloud"

# ------------------------------------------
# MicroCMS設定 (🟢 任意)
# ------------------------------------------
# MICROCMS_TUMIKI_BLOG_API_KEY=""
# MICROCMS_TUMIKI_BLOG_SERVICE_DOMAIN="tumiki"

# ------------------------------------------
# メンテナンスモード設定 (🟢 任意)
# ------------------------------------------
# MAINTENANCE_MODE=false
# MAINTENANCE_ALLOWED_IPS=""
# NEXT_PUBLIC_MAINTENANCE_END_TIME=""

# ------------------------------------------
# 開発・デバッグ設定 (🟢 任意)
# ------------------------------------------
# DEBUG_MULTITENANCY=false
# LOG_LEVEL="info"

# ==========================================
# 暗号化キーの生成方法
# ==========================================
# NEXTAUTH_SECRET, PRISMA_FIELD_ENCRYPTION_HASH_SALT:
#   openssl rand -base64 32
#
# REDIS_ENCRYPTION_KEY:
#   node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#
# PRISMA_FIELD_ENCRYPTION_KEY:
#   Cloakライブラリを使用（詳細はPrisma Field Encryptionドキュメント参照）
#   https://cloak.47ng.com/
#
# PRISMA_FIELD_DECRYPTION_KEYS (オプション):
#   キーローテーション時に古いキーで暗号化されたデータを復号化するために使用
#   カンマ区切りで複数の古いキーを指定可能
#   例: PRISMA_FIELD_DECRYPTION_KEYS="old-key-1,old-key-2"
