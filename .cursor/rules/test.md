# テストコード作成ルール

## テストフレームワークの仕様

1. コーディングルール
    - it ではなく test を使用してください
    - テスト名は日本語で記述し、どのような行動や場合のときに、どんな状態になるかを明示してください
    - toEqual ではなく toStrictEqual を使うようにしてください

2. テスト構造
    - describe ブロックは関数名を使用してください
    - 単体テストは古典派で作成し、外部とのI/O部分以外は可能な限りモックを使用しないでください

3. モックの使用
    - モックは、型定義をそのまま利用するために、mocked や spyOn を使用してください

4. 入力と期待される出力の明示
    - 各テストケースで、入力と期待される出力を明示的に記述し、テストの意図を明確にしてください

## テストファイルの命名規則

1. テストファイル名
    - テスト対象のファイル名に `.test.ts` を付加してください
    - 例: `utils.ts` → `utils.test.ts`

2. テストディレクトリ構造
    - テストファイルは、テスト対象のファイルと同じディレクトリに配置してください
    - 例: `src/utils/utils.ts` → `src/utils/utils.test.ts`

## テストケースの記述方法

1. テストケースの構造
    ```typescript
    describe("関数名", () => {
      test("テストケースの説明", () => {
        // テストの準備
        const input = ...;
        const expected = ...;

        // テストの実行
        const result = ...;

        // アサーション
        expect(result).toStrictEqual(expected);
      });
    });
    ```

2. テストケースの命名
    - テストケース名は「〜の場合、〜になる」という形式で記述してください
    - 例: "入力値が正の数の場合、正の結果が返される"

## テストの品質基準

1. テストの網羅性
    - 正常系のテストケース
    - 異常系のテストケース
    - 境界値のテストケース
    - エッジケースのテストケース

2. テストの独立性
    - 各テストケースは独立して実行できるようにしてください
    - テストケース間で状態を共有しないでください

3. テストの可読性
    - テストコードは自己文書化されるように記述してください
    - 複雑なテストケースは適切なコメントを追加してください

## テストの実行

1. テストの実行方法
    ```bash
    bun test
    ```

2. テストの実行オプション
    - 特定のテストファイルのみ実行: `bun test ファイル名`
    - 特定のテストケースのみ実行: `bun test -t "テストケース名"`
    - カバレッジレポートの生成: `bun test --coverage` 