name: Build Packages
description: ãƒ‡ãƒ—ãƒ­ã‚¤ã«å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼ˆvitest-configã€dbã€authã€utilsã€mailerã€slackã€oauth-token-managerï¼‰ã‚’ãƒ“ãƒ«ãƒ‰ã—ã¾ã™

runs:
  using: composite
  steps:
    - name: ğŸ”§ Build tooling packages
      shell: bash
      run: |
        echo "Building tooling packages..."
        pnpm run --filter @tumiki/vitest-config build

    - name: ğŸ“¦ Build core packages
      shell: bash
      run: |
        echo "Building core packages..."
        pnpm run --filter @tumiki/db build
        pnpm run --filter @tumiki/auth build
        pnpm run --filter @tumiki/mailer build
        pnpm run --filter @tumiki/slack build
        pnpm run --filter @tumiki/oauth-token-manager build

    - name: âœ… Verify builds
      shell: bash
      run: |
        echo "Verifying package builds..."
        for pkg in vitest-config db auth utils mailer slack oauth-token-manager; do
          if [ ! -d "packages/$pkg/dist" ] && [ ! -d "tooling/$pkg/dist" ]; then
            echo "Warning: Build output not found for @tumiki/$pkg"
          else
            echo "âœ“ @tumiki/$pkg built successfully"
          fi
        done
