name: 'Unified Deploy'
description: 'Deploy to Vercel'
inputs:
  target:
    description: 'Deployment target (vercel)'
    default: 'vercel'
    required: false
  stage:
    description: 'Deployment stage (staging|production)'
    default: 'staging'
    required: false
  vercel_token:
    description: 'Vercel authentication token'
    required: false
  vercel_org_id:
    description: 'Vercel organization ID'
    required: false
  vercel_project_id:
    description: 'Vercel project ID'
    required: false

outputs:
  vercel_url:
    description: 'Vercel deployment URL'
    value: ${{ steps.deploy.outputs.vercel_url }}

runs:
  using: 'composite'
  steps:
    - name: Run Unified Deploy Script
      id: deploy
      shell: bash
      env:
        # ãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®š
        DEPLOY_TARGET: ${{ inputs.target }}
        DEPLOY_STAGE: ${{ inputs.stage }}
        CI: 'true'

        # Vercelè¨­å®š
        VERCEL_TOKEN: ${{ inputs.vercel_token }}
        VERCEL_ORG_ID: ${{ inputs.vercel_org_id }}
        VERCEL_PROJECT_ID: ${{ inputs.vercel_project_id }}
      run: |
        echo "ğŸš€ çµ±åˆãƒ‡ãƒ—ãƒ­ã‚¤ã‚’é–‹å§‹"
        echo "ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ: $DEPLOY_TARGET"
        echo "ã‚¹ãƒ†ãƒ¼ã‚¸: $DEPLOY_STAGE"

        # ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«å®Ÿè¡Œæ¨©é™ã‚’ä»˜ä¸
        chmod +x scripts/deploy.sh

        # ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œ
        bash scripts/deploy.sh

        echo "âœ… ãƒ‡ãƒ—ãƒ­ã‚¤ãŒå®Œäº†ã—ã¾ã—ãŸ"