# DB Schema
> Generated by [`prisma-markdown`](https://github.com/samchon/prisma-markdown)

- [ApiAccess](#apiaccess)
- [McpServer](#mcpserver)
- [NextAuth](#nextauth)

## ApiAccess
```mermaid
erDiagram
"UserMcpServer" {
  String id PK
  String name "nullable"
  String envVars
  String mcpServerId FK
  String userId FK
  DateTime createdAt
  DateTime updatedAt
}
"ToolGroup" {
  String id PK
  String name
  String description
  Boolean isEnabled
  String order
  String userId FK
  DateTime createdAt
  DateTime updatedAt
}
"ApiKey" {
  String id PK
  String name
  String description
  String userId FK
  String order
  DateTime createdAt
  DateTime updatedAt
}
"_ApiKeyToToolGroup" {
  String A FK
  String B FK
}
"_ApiKeyToTool" {
  String A FK
  String B FK
}
"Tool" {
  String id PK
  String name
  String description
  Json inputSchema
  Boolean isEnabled
  String mcpServerId FK
  DateTime createdAt
  DateTime updatedAt
}
"User" {
  String id PK
  String name "nullable"
  String email UK "nullable"
  DateTime emailVerified "nullable"
  String image "nullable"
  Role role
  MembershipType membership
}
"_ToolToUserMcpServer" {
  String A FK
  String B FK
}
"_ToolToToolGroup" {
  String A FK
  String B FK
}
"UserMcpServer" }o--|| "User" : user
"ToolGroup" }o--|| "User" : user
"ApiKey" }o--|| "User" : user
"_ApiKeyToToolGroup" }o--|| "ApiKey" : ApiKey
"_ApiKeyToToolGroup" }o--|| "ToolGroup" : ToolGroup
"_ApiKeyToTool" }o--|| "ApiKey" : ApiKey
"_ApiKeyToTool" }o--|| "Tool" : Tool
"_ToolToUserMcpServer" }o--|| "Tool" : Tool
"_ToolToUserMcpServer" }o--|| "UserMcpServer" : UserMcpServer
"_ToolToToolGroup" }o--|| "Tool" : Tool
"_ToolToToolGroup" }o--|| "ToolGroup" : ToolGroup
```

### `UserMcpServer`
ユーザーが利用できるMCPサーバーの設定

**Properties**
  - `id`: 
  - `name`: カスタムMCPサーバー名 (ユーザーが設定した名前)
  - `envVars`: MCPサーバーの envVars を文字配列を key にしたオブジェクトを Object.stringify + 暗号化したもの
  - `mcpServerId`: MCPサーバーID
  - `userId`: ユーザーID
  - `createdAt`: 
  - `updatedAt`: 

### `ToolGroup`
どのツール群を利用するかを設定する

**Properties**
  - `id`: 
  - `name`: ツールグループ名
  - `description`: ツールグループの説明
  - `isEnabled`: ツールグループが有効かどうか
  - `order`: ツールの表示順序を保持するためのID配列
  - `userId`: ユーザーID
  - `createdAt`: 
  - `updatedAt`: 

### `ApiKey`
APIアクセスの設定

**Properties**
  - `id`: 
  - `name`: APIアクセス名
  - `description`: APIアクセスの説明
  - `userId`: ユーザーID
  - `order`: ツールグループとツールの表示順序を保持するためのID配列
  - `createdAt`: 
  - `updatedAt`: 

### `_ApiKeyToToolGroup`
Pair relationship table between [ApiKey](#ApiKey) and [ToolGroup](#ToolGroup)

**Properties**
  - `A`: 
  - `B`: 

### `_ApiKeyToTool`
Pair relationship table between [ApiKey](#ApiKey) and [Tool](#Tool)

**Properties**
  - `A`: 
  - `B`: 

### `Tool`
MCP サーバーのツール一覧

**Properties**
  - `id`: 
  - `name`: ツールの名前
  - `description`: ツールの説明
  - `inputSchema`: ツールの入力スキーマ（JSON Schema形式）
  - `isEnabled`: ツールを有効にするか
  - `mcpServerId`: 
  - `createdAt`: 
  - `updatedAt`: 

### `User`

**Properties**
  - `id`: 
  - `name`: ユーザー名
  - `email`: メールアドレス
  - `emailVerified`: メールアドレスの検証日時
  - `image`: プロフィール画像のURL
  - `role`: ユーザーの権限
  - `membership`: メンバーシップの種類

### `_ToolToUserMcpServer`
Pair relationship table between [Tool](#Tool) and [UserMcpServer](#UserMcpServer)

**Properties**
  - `A`: 
  - `B`: 

### `_ToolToToolGroup`
Pair relationship table between [Tool](#Tool) and [ToolGroup](#ToolGroup)

**Properties**
  - `A`: 
  - `B`: 


## McpServer
```mermaid
erDiagram
"McpServer" {
  String id PK
  String name UK
  String iconPath "nullable"
  String command
  String args
  String envVars
  Boolean isPublic
  DateTime createdAt
  DateTime updatedAt
}
"Tool" {
  String id PK
  String name
  String description
  Json inputSchema
  Boolean isEnabled
  String mcpServerId FK
  DateTime createdAt
  DateTime updatedAt
}
"_ToolToUserMcpServer" {
  String A FK
  String B FK
}
"_ToolToToolGroup" {
  String A FK
  String B FK
}
"_ApiKeyToTool" {
  String A FK
  String B FK
}
"Tool" }o--|| "McpServer" : mcpServer
"_ToolToUserMcpServer" }o--|| "Tool" : Tool
"_ToolToToolGroup" }o--|| "Tool" : Tool
"_ApiKeyToTool" }o--|| "Tool" : Tool
```

### `McpServer`
MCP サーバー (github や notion などの接続する外部 MCP サーバー)

**Properties**
  - `id`: 
  - `name`: MCP サーバー名
  - `iconPath`: アイコンパス
  - `command`: コマンド
  - `args`: 引数
  - `envVars`: 環境変数
  - `isPublic`: サーバーが公開されているか
  - `createdAt`: 
  - `updatedAt`: 

### `Tool`
MCP サーバーのツール一覧

**Properties**
  - `id`: 
  - `name`: ツールの名前
  - `description`: ツールの説明
  - `inputSchema`: ツールの入力スキーマ（JSON Schema形式）
  - `isEnabled`: ツールを有効にするか
  - `mcpServerId`: 
  - `createdAt`: 
  - `updatedAt`: 

### `_ToolToUserMcpServer`
Pair relationship table between [Tool](#Tool) and [UserMcpServer](#UserMcpServer)

**Properties**
  - `A`: 
  - `B`: 

### `_ToolToToolGroup`
Pair relationship table between [Tool](#Tool) and [ToolGroup](#ToolGroup)

**Properties**
  - `A`: 
  - `B`: 

### `_ApiKeyToTool`
Pair relationship table between [ApiKey](#ApiKey) and [Tool](#Tool)

**Properties**
  - `A`: 
  - `B`: 


## NextAuth
```mermaid
erDiagram
"Account" {
  String id PK
  String userId FK
  String type
  String provider
  String providerAccountId
  String refresh_token "nullable"
  String access_token "nullable"
  Int expires_at "nullable"
  String token_type "nullable"
  String scope "nullable"
  String id_token "nullable"
  String session_state "nullable"
  Int refresh_token_expires_in "nullable"
}
"Session" {
  String id PK
  String sessionToken UK
  String userId FK
  DateTime expires
}
"User" {
  String id PK
  String name "nullable"
  String email UK "nullable"
  DateTime emailVerified "nullable"
  String image "nullable"
  Role role
  MembershipType membership
}
"VerificationToken" {
  String identifier
  String token UK
  DateTime expires
}
"Account" }o--|| "User" : user
"Session" }o--|| "User" : user
```

### `Account`

**Properties**
  - `id`: 
  - `userId`: 
  - `type`: 認証プロバイダーの種類（oauth, oidc, email, credentials）
  - `provider`: 認証プロバイダー名（google, github, etc.）
  - `providerAccountId`: プロバイダー側のアカウントID
  - `refresh_token`: リフレッシュトークン
  - `access_token`: アクセストークン
  - `expires_at`: トークンの有効期限（Unixタイムスタンプ）
  - `token_type`: トークンの種類
  - `scope`: 認可スコープ
  - `id_token`: IDトークン
  - `session_state`: セッション状態
  - `refresh_token_expires_in`: リフレッシュトークンの有効期限（秒）

### `Session`

**Properties**
  - `id`: 
  - `sessionToken`: セッショントークン
  - `userId`: 
  - `expires`: セッションの有効期限

### `User`

**Properties**
  - `id`: 
  - `name`: ユーザー名
  - `email`: メールアドレス
  - `emailVerified`: メールアドレスの検証日時
  - `image`: プロフィール画像のURL
  - `role`: ユーザーの権限
  - `membership`: メンバーシップの種類

### `VerificationToken`

**Properties**
  - `identifier`: 検証対象の識別子（メールアドレスなど）
  - `token`: 検証トークン
  - `expires`: トークンの有効期限