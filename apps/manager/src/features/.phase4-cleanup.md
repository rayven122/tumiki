# Phase 4: Cleanup & Documentation

## Cleanup Tasks

### 4.1 旧ディレクトリ削除

- [ ] `server/api/routers/v2/notification/` (Phase 1 で移行済み)
- [ ] `server/api/routers/v2/dashboard/` (Phase 1 で移行済み)
- [ ] `server/api/routers/v2/feedback/` (Phase 1 で移行済み)
- [ ] `server/api/routers/v2/chat/` (Phase 2 で移行)
- [ ] `server/api/routers/v2/role/` (Phase 2 で移行)
- [ ] `server/api/routers/v2/group/` (Phase 2 で移行)
- [ ] `server/api/routers/organization/` (Phase 2 で members に統合)
- [ ] `server/api/routers/v2/agent/` (Phase 3 で移行)
- [ ] `server/api/routers/v2/agentExecution/` (Phase 3 で移行)
- [ ] `server/api/routers/v2/agentSchedule/` (Phase 3 で移行)
- [ ] `server/api/routers/v2/userMcpServer/` (Phase 3 で移行)
- [ ] `server/api/routers/v2/mcpServerTemplate/` (Phase 3 で移行)
- [ ] `server/api/routers/v2/mcpServerAuth/` (Phase 3 で移行)
- [ ] `server/api/routers/v2/oauth/` (Phase 3 で移行)
- [ ] `server/api/routers/v2/mcpRequestLog/` (Phase 3 で移行)

### 4.2 重複コード削除

- [ ] 未使用 import の削除
- [ ] 未使用エクスポートの削除
- [ ] knip による未使用コード検出・削除

### 4.3 ビルド最適化

- [ ] unused dependencies の削除（knip）
- [ ] Tree shaking 確認

## Documentation Updates

### 4.4 CLAUDE.md 更新

- [ ] Feature-Based Architecture セクションの追加
- [ ] ディレクトリ構造の更新
- [ ] 新しい開発フローの記載

### 4.5 スキルファイル更新

- [ ] `tumiki-manager-architecture` スキルの更新
- [ ] 新しい Feature 構造パターンの追加
- [ ] API ルーター構成の更新

### 4.6 計画ファイルの削除

- [ ] `.phase2-migration.md` の削除
- [ ] `.phase3-migration.md` の削除
- [ ] `.phase4-cleanup.md` の削除

## Completion Criteria

- [ ] すべての旧ディレクトリが削除済み
- [ ] `pnpm format:fix && pnpm lint:fix && pnpm typecheck && pnpm test && pnpm build` 成功
- [ ] EE/CE 両ビルド成功
- [ ] knip で未使用コードなし
- [ ] CLAUDE.md とスキルファイル更新完了
- [ ] Playwright MCP による最終検証完了
